<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Open Invitation Content Editor</title>
    <link rel="stylesheet" href="styles.css" />
    <!-- <link rel="stylesheet" href="/preview-styles/global.css" />
    <link rel="stylesheet" href="/preview-styles/layout.css" />
    <link rel="stylesheet" href="/preview-styles/components.css" /> -->
  </head>
  <body>
    <header class="app-header" data-header>
      <div class="header-main">
        <div class="header-copy">
          <h1>Open Invitation Content Editor</h1>
          <p class="tagline">
            Manage hero copy, narrative sections, and scripture studies.
          </p>
        </div>
        <button type="button" class="header-toggle" data-action="toggle-header" aria-expanded="true">
          Collapse Header
        </button>
      </div>
      <nav class="app-nav">
        <a href="#hero-section">Hero</a>
        <a href="#hero-tiles-section">Hero Tiles</a>
        <a href="#narratives-section">Narratives</a>
        <a href="#scriptures-section">Scriptures</a>
      </nav>
    </header>

    <main class="app-main">
      <section id="flash-region" aria-live="polite"></section>

      <section id="hero-section" class="panel">
        <header class="panel-header">
          <h2>Hero</h2>
          <button type="button" class="secondary" data-action="refresh-hero">Refresh</button>
        </header>
        <form id="hero-form" class="form-grid">
          <label>
            <span>Title</span>
            <textarea name="title" rows="2" required></textarea>
          </label>
          <label class="wide">
            <span>Description</span>
            <textarea name="description" rows="5" required></textarea>
          </label>
          <label>
            <span>Image Path</span>
            <input name="imagePath" type="text" placeholder="src/img/home.png" />
          </label>
          <label>
            <span>Image Alt</span>
            <input name="imageAlt" type="text" placeholder="Hero image alt text" />
          </label>
          <div class="cta-group">
            <h3>Primary CTA</h3>
            <label>
              <span>Label</span>
              <input name="primaryCta.label" type="text" />
            </label>
            <label>
              <span>Href</span>
              <input name="primaryCta.href" type="text" />
            </label>
          </div>
          <div class="cta-group">
            <h3>Secondary CTA</h3>
            <label>
              <span>Label</span>
              <input name="secondaryCta.label" type="text" />
            </label>
            <label>
              <span>Href</span>
              <input name="secondaryCta.href" type="text" />
            </label>
          </div>
          <div class="form-actions">
            <button type="submit">Save Hero</button>
          </div>
        </form>
      </section>

      <section id="hero-tiles-section" class="panel">
        <header class="panel-header">
          <h2>Hero Tiles</h2>
          <p class="panel-description">Select three featured passages that appear on the home page.</p>
        </header>
        <form id="hero-tiles-form" class="tiles-form">
          <div class="tile-row" data-position="0">
            <label>
              <span>Tile 1 Scripture</span>
              <select name="tile-0"></select>
            </label>
          </div>
          <div class="tile-row" data-position="1">
            <label>
              <span>Tile 2 Scripture</span>
              <select name="tile-1"></select>
            </label>
          </div>
          <div class="tile-row" data-position="2">
            <label>
              <span>Tile 3 Scripture</span>
              <select name="tile-2"></select>
            </label>
          </div>
          <div class="form-actions">
            <button type="submit">Save Tiles</button>
          </div>
        </form>
      </section>

      <section id="narratives-section" class="panel">
        <header class="panel-header">
          <h2>Narratives</h2>
          <button type="button" class="secondary" data-action="add-narrative">Add Narrative</button>
        </header>
        <div id="narratives-list" class="card-list"></div>
        <dialog id="narrative-dialog">
          <form method="dialog" id="narrative-form" class="form-grid">
            <h3 class="dialog-title">Narrative Section</h3>
            <input type="hidden" name="id" />
            <label class="wide">
              <span>Title</span>
              <input name="title" type="text" required />
            </label>
            <label class="wide">
              <span>Description</span>
              <textarea name="description" rows="4" required></textarea>
            </label>
            <label>
              <span>Scripture ID</span>
              <input name="scriptureId" type="text" list="scripture-id-list" />
            </label>
            <label>
              <span>Image Path</span>
              <input name="imagePath" type="text" />
            </label>
            <label>
              <span>Image Alt</span>
              <input name="imageAlt" type="text" />
            </label>
            <label>
              <span>Accent Color</span>
              <input name="accent" type="text" placeholder="#4f46e5" />
            </label>
            <label>
              <span>Position</span>
              <input name="position" type="number" min="0" />
            </label>
            <menu class="dialog-actions">
              <button value="cancel" class="secondary">Cancel</button>
              <button value="submit" class="primary">Save</button>
            </menu>
            <button type="button" class="danger" data-action="delete-narrative">Delete</button>
          </form>
        </dialog>
      </section>

      <section id="scriptures-section" class="panel">
        <header class="panel-header">
          <h2>Scriptures</h2>
          <div class="panel-controls">
            <input id="scripture-search" type="search" placeholder="Search by reference or title" />
            <button type="button" class="secondary" data-action="add-scripture">Add Scripture</button>
          </div>
        </header>
        <div id="scripture-list" class="scripture-cards"></div>
      </section>

      <dialog id="scripture-dialog">
        <form id="scripture-form" method="dialog">
          <header class="dialog-header">
            <h3 id="scripture-form-title">Scripture</h3>
            <button type="button" class="secondary" data-action="duplicate-scripture">Duplicate</button>
          </header>

          <section class="collapsible-section" data-section="metadata">
            <header class="section-header">
              <h4>Metadata</h4>
              <button type="button" class="toggle-section" data-toggle="metadata">Collapse</button>
            </header>
            <div class="section-content" data-content="metadata">
              <div class="form-grid">
                <label>
                  <span>ID</span>
                  <input name="id" type="text" required />
                </label>
                <label>
                  <span>Reference</span>
                  <input name="reference" type="text" required />
                </label>
                <label>
                  <span>Title</span>
                  <input name="title" type="text" required />
                </label>
                <label>
                  <span>Translation</span>
                  <input name="translation" type="text" />
                </label>
                <label>
                  <span>Category</span>
                  <input name="category" type="text" />
                </label>
                <label>
                  <span>Selector Category</span>
                  <input name="selectorCategory" type="text" />
                </label>
                <label>
                  <span>Alignment</span>
                  <input name="alignment" type="text" />
                </label>
                <label class="wide">
                  <span>Themes (one per line)</span>
                  <textarea name="themes" rows="3"></textarea>
                </label>
                <label class="wide">
                  <span>Badges (one per line)</span>
                  <textarea name="badges" rows="3"></textarea>
                </label>
              </div>
            </div>
            <div class="section-preview" data-preview="metadata" hidden></div>
          </section>

          <section class="collapsible-section" data-section="summaries">
            <header class="section-header">
              <h4>Summaries</h4>
              <button type="button" class="toggle-section" data-toggle="summaries">Collapse</button>
            </header>
            <div class="section-content" data-content="summaries">
              <div class="form-grid">
                <label class="wide">
                  <span>Summary</span>
                  <textarea name="summary" rows="3"></textarea>
                </label>
                <label class="wide">
                  <span>Key Verse</span>
                  <textarea name="keyVerse" rows="3"></textarea>
                </label>
              </div>
            </div>
            <div class="section-preview" data-preview="summaries" hidden></div>
          </section>

          <section class="collapsible-section" data-section="context">
            <header class="section-header">
              <h4>Context</h4>
              <button type="button" class="toggle-section" data-toggle="context">Collapse</button>
            </header>
            <div class="section-content" data-content="context">
              <div class="form-grid">
                <label class="wide">
                  <span>Context (Heading :: Body per line)</span>
                  <textarea name="context" rows="4"></textarea>
                </label>
              </div>
            </div>
            <div class="section-preview" data-preview="context" hidden></div>
          </section>

          <section class="collapsible-section" data-section="analysis">
            <header class="section-header">
              <h4>Analysis Sections</h4>
              <button type="button" class="toggle-section" data-toggle="analysis">Collapse</button>
            </header>
            <div class="section-content" data-content="analysis">
              <div class="analysis-editor-container">
                <button type="button" class="secondary" data-action="add-analysis">Add Section</button>
                <div id="analysis-list" class="repeatable-list"></div>
              </div>
            </div>
            <div class="section-preview" data-preview="analysis" hidden></div>
          </section>

          <menu class="dialog-actions">
            <button type="button" class="danger" data-action="delete-scripture">Delete</button>
            <div class="dialog-actions-right">
              <button type="button" value="cancel" class="secondary" data-action="close-dialog">Close</button>
              <button type="submit" class="primary">Save Scripture</button>
            </div>
          </menu>
        </form>
      </dialog>
    </main>

    <datalist id="scripture-id-list"></datalist>

    <script type="module" src="main.js"></script>
  </body>
</html>
